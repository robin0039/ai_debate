# 🧠 AI 辯論 Demo 規格書：《貓比較聰明還是狗比較聰明？》

## 🎯 目的

建立一個 Python 應用程式，讓三個不同的 AI 模型分別代表三種立場就「貓比較聰明還是狗比較聰明？」這個主題進行輪流辯論。三個AI分別固定代表「貓比較聰明」、「狗比較聰明」、「貓跟狗都很笨」的觀點，討論結束後每位 AI 根據全場發言內容發表結論。

---

## ⚙️ 技術規格

| 項目         | 說明 |
|--------------|------|
| 語言         | Python 3.10+ |
| 模型         | - OpenAI `gpt-4o-mini`（代表：貓比較聰明）<br>- Google Gemini `2.5-flash`（代表：狗比較聰明）<br>- OpenRouter `deepseek/deepseek-chat-v3-0324:free`（代表：貓跟狗都很笨） |
| 討論輪數     | 固定 3 輪辯論 + 1 輪總結 |
| 發言限制     | 每次最多 150 字 |
| 討論語言     | 繁體中文 |
| 輸出方式     | 終端機 CLI 輸出 |

---

## 📄 Prompt 設計

### 🔧 System Prompt（每個模型專用）

#### 🐱 GPT-4o-mini（貓派代表）
> 你是一個參與群體討論的 AI，你的立場是「貓比較聰明」。請堅持並論證貓比狗更加聰明的觀點。請使用繁體中文，發言字數限制為 150 字以內。

#### 🐶 Gemini 2.5-flash（狗派代表）
> 你是一個參與群體討論的 AI，你的立場是「狗比較聰明」。請堅持並論證狗比貓更加聰明的觀點。請使用繁體中文，發言字數限制為 150 字以內。

#### 🤷 DeepSeek（中立懷疑派代表）
> 你是一個參與群體討論的 AI，你的立場是「貓跟狗都很笨」。請堅持並論證貓和狗其實都不算太聰明的觀點。請使用繁體中文，發言字數限制為 150 字以內。

#### 📊 總結階段專用 System Prompt
> 你是一個客觀的辯論總結者。請根據提供的完整辯論內容，客觀分析各方論點並總結辯論結果，最後再給出你覺得這場辯論是哪個立場勝利的結論。請使用繁體中文，言簡意賅地進行總結。

### 💬 Prompt 結構格式

#### 🟢 首輪發言格式
```json
[
    {
        "role": "system", 
        "content": "你是一個參與群體討論的 AI，你的立場是「[具體立場]」。請堅持並論證你的觀點。請使用繁體中文，發言字數限制為 150 字以內。"
    },
    {
        "role": "user", 
        "content": "主題：「貓比較聰明還是狗比較聰明？」請發表你的看法。"
    }
]
```

#### 🔄 第二輪起發言格式
```json
[
    {
        "role": "system", 
        "content": "你是一個參與群體討論的 AI，你的立場是「[具體立場]」。請堅持並論證你的觀點。請使用繁體中文，發言字數限制為 150 字以內。"
    },
    {
        "role": "user", 
        "content": "主題：「貓比較聰明還是狗比較聰明？」請發表你的看法。"
    },
    {
        "role": "assistant", 
        "content": "【貓派】我認為貓比狗聰明...\n【狗派】我反對，狗更聰明...\n【懷疑派】你們都錯了..."
    },
    {
        "role": "user", 
        "content": "主題：「貓比較聰明還是狗比較聰明？」請發表你的看法。"
    }
]
```

#### 🧾 總結階段格式
```json
[
    {
        "role": "system", 
        "content": "你是一個客觀的辯論總結者。請根據提供的完整辯論內容，客觀分析各方論點並總結辯論結果，最後再給出你覺得這場辯論是哪個立場勝利的結論。請使用繁體中文，言簡意賅地進行總結。"
    },
    {
        "role": "user", 
        "content": "以下是完整的辯論內容：\n【完整對話歷史】\n\n請客觀總結這場辯論的結果。"
    }
]
```

---

## 🔄 討論流程

1. **初始化階段**
   - 三個 AI 模型固定立場：
     - GPT-4o-mini → 「貓比較聰明」
     - Gemini 2.5-flash → 「狗比較聰明」  
     - DeepSeek → 「貓跟狗都很笨」

2. **辯論階段（固定 3 輪）**
   - **第 1 輪**：使用首輪格式 `[system, user]`，每位 AI 發表初始觀點
   - **第 2-3 輪**：使用延續格式 `[system, user, assistant, user]`，根據歷史發言進行反駁
   - 每輪每位 AI 發言不超過 150 字

3. **總結階段**
   - 使用客觀總結格式，移除預設立場
   - 根據完整辯論內容客觀分析並總結結果
   - 每位 AI 言簡意賅地進行總結（無字數限制）

---

## 📂 簡化專案結構

```
/ai_debate_app/
│
├── main.py                      # 程式進入點
├── debate_session.py            # 控制討論流程
├── models/
│   ├── openai_client.py         # GPT-4o-mini
│   ├── gemini_client.py         # Gemini 2.5-flash
│   └── openrouter_client.py     # DeepSeek
│
└── .env                         # API 金鑰
```

---

## 🔐 API 金鑰需求

請透過 `.env` 或環境變數設定以下金鑰：

- `OPENAI_API_KEY`
- `GOOGLE_API_KEY` / `GEMINI_API_KEY`
- `OPENROUTER_API_KEY`

---

## 🎭 角色立場分配

| AI 模型 | 立場 |
|---------|------|
| GPT-4o-mini | 🐱 貓比較聰明 |
| Gemini 2.5-flash | 🐶 狗比較聰明 |
| DeepSeek | 🤷 貓跟狗都很笨 |

---

## ✨ 新功能

### 🚀 Streaming Responses（即時回應）
- **即時輸出**：AI 回應會以 streaming 方式即時顯示，如同真人打字
- **更好體驗**：不用等待完整回應，可以即時看到 AI 的思考過程
- **技術支援**：
  - OpenAI：使用 `stream=True` 參數
  - Gemini：使用原生 streaming API
  - OpenRouter：支援 SSE (Server-Sent Events) 格式

### 🔍 Prompt 顯示功能
- **透明化**：可選擇是否顯示完整的 API 請求內容
- **學習價值**：了解每個 AI 收到的完整 prompt 結構
- **美化格式**：包含角色標示（🤖 系統、👤 使用者、🤝 助手）與分隔線
- **階段支援**：辯論階段與總結階段都支援 prompt 顯示

### 🎮 使用方式
程式啟動時會詢問：
```
🔧 辯論設定
------------------------------
是否顯示完整 prompt 內容？ (y/n) [預設: n]: 
```

輸入選項：
- `y` / `yes` / `是` / `要` → 顯示完整 prompt
- `n` / `no` / `否` / `不要` / 直接按 Enter → 不顯示 prompt

---

## 🚀 快速開始

### 1. 安裝依賴
```bash
pip install -r requirements.txt
```

### 2. 設定 API 金鑰
複製 `.env.example` 為 `.env` 並填入實際的 API 金鑰：
```bash
cp .env.example .env
# 編輯 .env 檔案，填入你的 API 金鑰
```

### 3. 執行程式
```bash
python main.py
```

### 4. 享受辯論
程式會引導你完成設定，然後開始精彩的 AI 辯論！

---

## ✅ 重點規範

- **固定流程**：3 輪辯論 + 1 輪客觀總結
- **字數限制**：辯論階段每次發言最多 150 字，總結階段無字數限制但要求言簡意賅
- **對話格式**：使用結構化的 `[system, user, assistant, user]` 格式
- **立場設定**：辯論階段各自堅持立場，總結階段客觀分析
- **語言**：全程使用繁體中文
- **即時輸出**：所有 AI 回應都以 streaming 方式即時顯示
- **透明化**：可選擇顯示完整 prompt 內容

---